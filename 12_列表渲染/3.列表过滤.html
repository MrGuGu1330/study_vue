<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>列表过滤</title>
  <!-- 引入Vue -->
  <script type="text/javascript" src="../js/vue.js"></script>
</head>
<body>
<!-- 容器 -->
<div id="root">
  <h2>人员列表</h2>
  <input type="text" placeholder="请输入名字" v-model="keyword">
  <ul>
    <li v-for="(p,index) of filPersons" :key="index" >
      {{p.name}}---{{p.age}}----{{p.sex}}
    </li>
  </ul>
</div>

<script type="text/javascript">
  Vue.config.productionTip = false; //阻止vue启动时生成提示
  // 用computed实现

  new Vue({
    el: '#root',
    data: {
      keyword:'',
      persons: [
        {id: '001', name: '马冬梅', age: 18,sex: '女'},
        {id: '002', name: '周冬雨', age: 19,sex: '女'},
        {id: '003', name: '周杰伦', age: 20,sex: '男'},
        {id: '004', name: '温兆伦', age: 20,sex: '男'},
      ],
    },
    computed:{
      filPersons(){
        return this.persons.filter((p)=>{
          return p.name.indexOf(this.keyword) !== -1
        })
      }
    }
  })

  // watch 实现
/*  new Vue({
    el: '#root',
    data: {
      keyword:'',
      persons: [
        {id: '001', name: '马冬梅', age: 18,sex: '女'},
        {id: '002', name: '周冬雨', age: 19,sex: '女'},
        {id: '003', name: '周杰伦', age: 20,sex: '男'},
        {id: '004', name: '温兆伦', age: 20,sex: '男'},
      ],
      filPersons:[]

    },
    watch:{
      keyword: {
        immediate: true,
        handler(newValue){
          // console.log('keyword被修改', this.keyword)
          this.filPersons = this.persons.filter((p)=>{
            return p.name.indexOf(newValue) !== -1
          })
        }
      }
    }
  })*/
</script>
</body>
</html>